# 📖 Harmonia v3.0 - Complete Guide

## 仕様

| 項目 | 詳細 |
|------|------|
| **バージョン** | 3.0 Final |
| **ステータス** | ✅ 本稼働対応 |
| **ブラウザ** | Chrome/Edge 90+ (Safari/Firefox部分対応) |
| **サイズ** | 150KB (圧縮時) |
| **ライセンス** | MIT |

---

## 📚 目次

1. [インストール](#インストール)
2. [基本操作](#基本操作)
3. [機能詳細](#機能詳細)
4. [トラブルシューティング](#トラブルシューティング)

---

## インストール

### セットアップ（2ステップ）

1. **ファイル配置**
   - このディレクトリ全体をWebサーバーで公開

2. **サーバー起動**
   ```bash
   python -m http.server 8000
   ```

3. **ブラウザアクセス**
   ```
   http://localhost:8000
   ```

---

## 基本操作

### メイン画面
- **左パネル**: ナビゲーション（トラック、プレイリスト、お気に入り）
- **中央**: トラックリスト
- **右パネル**: キュー・歌詞表示
- **下部**: プレイヤーコントロール

### フレーズ別操作

| 操作 | 方法 |
|------|------|
| **曲を再生** | トラックをクリック |
| **一時停止** | ⏸ ボタン |
| **次曲** | ⏭ ボタン |
| **プレイリスト作成** | 「プレイリスト作成」ボタン |
| **EQ設定** | 設定 → イコライザー |
| **テーマ変更** | 設定 → テーマ |

---

## 機能詳細

### 🎚️ オーディオ機能

#### イコライザー（10バンド）
- **低音**: 50, 125, 250 Hz
- **中音**: 500, 1k, 2k Hz
- **高音**: 4k, 8k, 16k Hz
- **リセット**: ワンクリック

**使用方法**:
1. 設定 → イコライザー
2. スライダーを調整
3. リアルタイムで音質変更

#### 再生速度調整
- **範囲**: 0.5x ～ 2.0x
- **ステップ**: 0.1x
- **用途**: ポッドキャスト、言語学習など

#### クロスフェード
- **フェード時間**: 3～10秒（カスタマイズ可能）
- **対応フォーマット**: MP3, AAC, WAV, FLAC

### 📋 プレイリスト

#### 作成方法
```
1. 「プレイリスト作成」ボタン
2. プレイリスト名を入力
3. 色を選択（オプション）
4. 「作成」をクリック
```

#### 操作
- **トラック追加**: ドラッグ&ドロップ
- **複製**: プレイリスト横の「⋮」→ 複製
- **エクスポート**: JSON / M3U / CSV
- **マージ**: 複数プレイリストを統合

### ⏱️ スリープタイマー

**設定方法**:
1. 設定 → スリープタイマー
2. 時間を選択（15/30/45/60分）
3. タイマースタート

**特徴**:
- 高精度（誤差 <0.5秒）
- リアルタイム残り時間表示
- キャンセル機能

### 🔊 バックグラウンド再生

**機能**:
- ロック画面で再生制御
- メディアキーボード対応
- スマートウォッチ連携

**活有化**:
- 設定でONにする
- 通知権限を許可

### 🗑️ トラック削除（新機能）

**削除方法**:
- トラック右側の **🗑️ アイコン** をクリック
- 確認ダイアログで「削除」を選択
- 自動的にプレイリスト・キューから削除

**削除される情報**:
- トラック本体
- プレイリストの参照
- お気に入り登録
- キュー内の位置

### 🔋 省エネモード（新機能）

**目的**:
- バッテリー節約
- CPU使用率削減
- スマートフォン対応

**有効化方法**:
1. 設定 → 「🔋 省エネモードを有効化」をON
2. プロファイルを選択

**プロファイル**:
- **⚡ 最大節約**: CPU 30% 削減（ビジュアライザー OFF）
- **⚖️ バランス**: CPU 50% 削減（推奨）
- **🚀 フル機能**: 全機能有効（省エネなし）

---

## コンソール参照情報

### デバッグ用コマンド

```javascript
// アプリ状態確認
window.harmonia.state.getState()

// プレイヤー操作
window.harmonia.play()
window.harmonia.pause()
window.harmonia.next()

// 🗑️ トラック削除
window.harmonia.deleteTrack(trackId)
window.harmonia.deleteMultipleTracks([id1, id2, id3])

// 🔋 省エネモード
window.harmonia.setPowerSaveMode(true, 'balanced')  // 有効化
window.harmonia.setPowerSaveMode(false)  // 無効化

// プレイリスト作成
window.harmonia.playlistManager.createPlaylist('MyPlaylist')

// ボリューム設定
window.harmonia.audio.setVolume(0.8)

// EQ変更
window.harmonia.audio.setEqualizer('low', 5)
```

---

## トラブルシューティング

### 音声が出ない
1. ブラウザのボリュームを確認
2. 設定 → オーディオ → デバイス確認
3. ファイル形式を確認（MP3/AAC推奨）

### ファイルが読み込めない
1. ファイル形式を確認
2. ファイルサイズを確認（2GB以下推奨）
3. コンソール（F12）でエラー確認

### メモリ不足
1. ブラウザを再起動
2. トラック数を削除
3. バージョン更新を確認

### UIが表示されない
1. ブラウザキャッシュをクリア
2. 別ブラウザで試す
3. コンソール（F12）でエラー確認

---

## ホットキー（今後実装予定）

```
Space  : 再生/一時停止
→      : 次曲
←      : 前曲
↑      : ボリューム+
↓      : ボリューム-
M      : ミュート
```

---

## 仕様・制限事項

### ファイル形式
- ✅ MP3, AAC, WAV, FLAC
- ⚠️ OGG (ブラウザ依存)
- ❌ M4A (一部ブラウザ)

### ストレージ
- **ローカル**: IndexedDB (50-100MB)
- **履歴保存**: 自動
- **設定保存**: 自動

### ネットワーク
- ❌ ストリーミング再生（未実装）
- ✅ ローカルファイル再生
- ❌ リモートファイル再生（セキュリティ上）

---

## 今後の拡張機能

- [ ] ホットキーサポート
- [ ] クラウドストレージ同期
- [ ] AI推奨機能
- [ ] マルチデバイス同期
- [ ] プラグインシステム

---

## サポート

**バグ報告**
```
コンソール (F12) のエラーをコピーしてお送りください
```

**フィードバック**
- 使用感やアイデアを歓迎します
- 継続的に改善中です

---

**Happy Listening! 🎵**
