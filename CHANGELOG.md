# Harmonia v2.0 - アップデート内容

## 🎉 主な変更点

### 🐛 修正されたバグ

✅ **アートワークが消える問題を修正**
- 再読み込み後もアルバムアートが表示されるようになりました
- Base64形式で永続的に保存

✅ **ビジュアライザーの安定性向上**
- よりスムーズな動作
- パフォーマンス最適化

✅ **プレイリスト機能を完全実装**
- プレイリストの作成・編集・削除
- トラックの追加・削除
- プレイリストの再生

---

## 🚀 新機能

### 高優先度 ★★★

#### 📋 プレイリスト管理
- プレイリストを自由に作成
- トラックをプレイリストに追加/削除
- プレイリストをワンクリックで再生

#### 🎤 歌詞表示
- トラックごとに歌詞を保存
- 再生時に自動表示
- 歌詞の編集・削除が可能

#### 🔖 ブックマーク
- 曲の特定位置をブックマーク
- ラベル付けで管理
- ワンクリックで該当位置にジャンプ

### 中優先度 ★★

#### 📊 再生履歴・統計
- すべての再生を自動記録
- 総再生回数・再生時間を表示
- 最も再生された曲を表示
- 過去1週間の再生履歴

#### 🎚️ 10バンドイコライザー
- 32Hz～16kHzの10バンドで詳細調整
- 9種類のプリセット搭載
  - Flat, Rock, Pop, Jazz, Classical
  - Bass Boost, Treble Boost, Vocal
  - Electronic, Acoustic

#### ✏️ トラック情報編集
- タイトル、アーティスト、アルバムを編集
- ジャンル、カテゴリの変更
- 即座に保存・反映

### その他

#### 🗑️ 全データ削除
- すべてのデータを一括削除
- クリーンな状態からやり直し可能

---

## 💡 使い方のヒント

### プレイリストの作成
1. 「プレイリスト」タブを開く
2. 「新規作成」ボタンをクリック
3. 名前と説明を入力
4. トラックを追加

### 歌詞の追加
1. トラックを選択
2. 「歌詞」ボタンをクリック
3. 歌詞を入力
4. 保存

### ブックマークの追加
1. 曲を再生
2. ブックマークしたい位置で停止
3. 「ブックマーク追加」ボタンをクリック
4. ラベルを入力（オプション）

### イコライザーの調整
1. 設定を開く
2. 「イコライザー」セクションへ
3. スライダーで調整、またはプリセットを選択

---

## 📂 データの保存場所

すべてのデータはブラウザのIndexedDBに保存されます:
- 音楽ファイル本体
- アルバムアート（Base64形式）
- プレイリスト
- お気に入り
- 歌詞
- ブックマーク
- 再生履歴
- 設定

**注意**: ブラウザのデータを消去すると、すべてのデータが失われます。

---

## ⚠️ 重要な変更点

### データベースバージョン
v3 → v5 に自動アップグレード
- 既存のデータは保持されます
- 新しいストア（lyrics, bookmarks, playHistory）が追加されます

### アートワークの保存形式
Blob URL → Base64 data URL
- ファイルサイズが約33%増加
- 永続的に保存可能になりました

---

## 🎵 既存の機能（v1.1から継続）

### スリープタイマー ⏰
- 15/30/45/60分のプリセット
- フェードアウト機能
- 残り時間表示

### 再生速度調整 ⚡
- 0.5x ～ 2.0x の範囲
- 語学学習・音楽練習に最適

### A-Bリピート 🔄
- 曲の特定区間を繰り返し再生
- 3段階操作（A点設定→B点設定→解除）

### その他の基本機能
- シャッフル再生
- リピート（1曲/全曲）
- お気に入り管理
- 再生キュー
- ビジュアライザー
- 検索機能

---

## 🚀 起動方法

### 推奨: ローカルサーバー

```bash
# Python 3がインストールされている場合
cd music-app
python -m http.server 8000

# ブラウザで http://localhost:8000 を開く
```

### VS Code + Live Server
1. Live Server拡張機能をインストール
2. index.htmlを右クリック
3. "Open with Live Server"を選択

---

## 📝 更新履歴

**v2.0 - 2026年2月12日**
- アートワーク保持のバグ修正
- プレイリスト機能の完全実装
- 歌詞表示機能
- ブックマーク機能
- 再生履歴・統計
- 10バンドイコライザー
- トラック情報編集
- 全データ削除機能

**v1.1 - 2026年2月11日**
- スリープタイマー
- 再生速度調整
- A-Bリピート

**v1.0 - 2026年2月11日**
- 初回リリース

---

## 📞 サポート

問題や質問があれば、フィードバックをお寄せください。

---

**Harmonia v2.0で、より豊かな音楽体験を！** 🎵✨
